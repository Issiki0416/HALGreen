## HAL Green

## 概要
マルチログインに対応したECサイトです。

## バリデーション
### フォームリクエストを採用
- コントローラーで処理するのではなく、リクエストの内部で勝手に処理をしてくれる方がスマート
- フォームリクエストにはバリデーション関係の機能が組まれているのでカスタマイズがしやすい
## 機能


# マルチログイン
### それぞれモデル、マイグレーションを作成し、RouteServiceProviderをいじる
- ユーザー(商品を購入)・・・/

- 管理者(オーナーの管理)・・・/admin
    - オーナー新規登録
        - フラッシュメッセージで登録完了を表示する
    - オーナー情報の編集
        - Owner::findOrFail($id)でIDからオーナー情報を探す。404も使えるので採用。名前付きルートの第2引数にidを指定する
    - オーナー情報の削除
        - ソフトデリートで削除する
        - フラッシュメッセージで削除完了を表示する(sweetAlertで見た目を意識)
        - アラートを表示する
    - 期限切れオーナー一覧
        - オーナーの一覧を表示する
        - 期限切れのオーナーを表示する
        - 期限切れのオーナーを削除する
        - フラッシュメッセージで削除完了を表示する
        - アラートを表示する

- オーナー(商品を登録)・・・/owner
    - オーナープロフィール編集
    - 店舗情報更新(1オーナー 1店舗)
    - 画像登録
        - ファイルかどうかのバリデーション
        - ユーザ側とサーバー側でリサイズする(サーバ側:Intervention Imageを使用)
        - 画像のアップロードは商品登録時にも使うのでapp/Servicesフォルダを作成して処理を切り離すことでコントローラ側をスッキリさせる
    - 商品登録(画像、カテゴリ選択、在庫設定)
        - 画像の複数アップロード→Laravel側で配列のバリデーション
        - 配列で渡ってくる各要素にバリデーションをかける
        - 2段階のカテゴリーの追加(Primary CategoryとSecondary Category)


- 提供側
    - 商品の登録
    - 商品の編集
- 利用側
    - 商品購入
        - 決済機能：Stripe (APIのPUBRIC_KEYとSECRET_KEYを.envに記述)
    
## Laravelフロー
<img width="881" alt="image" src="https://user-images.githubusercontent.com/96870513/203036307-8b5e7a82-38b0-4cf2-99f4-20bf2a16966a.png">

## インストール後の設定
画像のダミーデータはpublic/imagesフォルダ内にsample1.jpgからsample6.jpgまで用意しています。    
``` php artisan storage:link ```でstorageフォルダにリンクを作成後、    
storage/app/public/productsフォルダ内に保存すると表示されます。(productsフォルダがない場合は作成してください。)

ショップの画像も表示する場合、storage/app/public/productsフォルダを作成して画像を保存してください。
